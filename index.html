<html>
    <head>
        <link rel="stylesheet" href="./css/common.css">
        <title></title>
    </head>
    <body>
        <div class="todoListWrap">
            <h2>To Do List</h2>
            <div class="searchBox"><input type="text" placeholder="Lorem ipsum dolor sit amet consectetur adipisicing elit." name="searchV"><button class="btn_Submit">SUBMIT</button></div>
            <ul class="listNav"></ul>
        </div>

        <script>
            // 1. input 입력 후, Enter 및 Submit버튼 클릭시 입력 내용 list 추가, 내용 없이 Enter 및 Submit 클릭시 안내 문구 호출하며 리턴
            // 2. 추가된 리스트 X 버튼 클릭시 삭제
            // 3. 추가된 리스트 위, 아래 버튼 클릭시 위치 이동되며 끝에 부딪혔을때(다음 요소가 없을때) 안내 문구 호출하며 리턴
            const searchSelector = document.querySelector('input[name="searchV"]');
            const btnClick = document.querySelector('.btn_Submit');
            const todoList = document.querySelector('.listNav');

            searchSelector.addEventListener('keydown', function(e){ // 키 입력시 아래 내용 실행
                if(e.key == 'Enter'){ // Enter 입력시 아래 내용 실행
                    addValue();
                }
            })

            btnClick.addEventListener('click', function(){ // Submit 버튼 클릭시 아래 내용 실행
                addValue();
             })
            
            function addValue(){
                if(searchSelector.value == ''){ // 입력 박스에 내용이 없을 경우 아래 내용 실행.
                    alert('내용이 없습니다.');
                    return;
                }
                todoList.innerHTML += '<li>'+searchSelector.value+'<span class="listRemove" onclick="listRemove(this)"></span><span class="moveItem prevItem" onclick="prevItemMove(this)">▲</span><span class="moveItem nextItem" onclick="nextItemMove(this)">▼</span></li>' // 이벤트 실행시 html 추가
                searchSelector.value = ''; // 이벤트가 실행되면 입력 박스 value 초기화
                searchSelector.focus(); // 이벤트 전부 실행되면 focus가 입력 박스로 이동
            }


            function listRemove(e){ // 함수 실행시 this 부모 노드를 삭제함
                e.parentNode.remove();
                searchSelector.focus(); // 이벤트 전부 실행되면 focus가 입력 박스로 이동
            }

            function nextItemMove(e){
                const thisItem = e.parentNode;
                const nextPosition = e.parentNode.nextSibling;
                
                if(nextPosition == '' || nextPosition == null || nextPosition == undefined || nextPosition == NaN){
                    alert('아래 요소가 없습니다.');
                    return;
                }else nextPosition.after(thisItem);
            }

            function prevItemMove(e){
                const thisItem = e.parentNode;
                const prevPosition = e.parentNode.previousSibling;
                
                if(prevPosition == '' || prevPosition == null || prevPosition == undefined || prevPosition == NaN){
                    alert('위에 요소가 없습니다.');
                    return;
                }else prevPosition.before(thisItem);
            }
        </script>
    </body>
</html>